<!DOCTYPE html><html><head> <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"/> <style>body{margin: 0px;}.under-navbar{color: white; font-size: 30px; background-color: #505050; text-align: center; display: grid; justify-items: center; align-items: center;}.navbar{position: fixed; display: block; width: 100%; color: white; font-size: 30px; background-color: #505050; text-align: center; display: grid; justify-items: center; align-items: center;}.body-container{display: grid; grid-template-rows: auto auto; background-color: #242F41;}.year-text{font-size: 7vw; color: white; padding-left: 5%; padding-right: 5%;}hr{margin: 0;}.year{/*padding-top: 5%;*/ padding-left: 5%; padding-right: 5%; /*height: 100vh;*/ display: grid; grid-gap: 0.1rem; grid-row-gap: 0.7rem;}.year{grid-template-columns: auto auto auto auto;}.dot{/*height: 20%;*/ /*width: 1%;*/ padding: 25%; /*margin-bottom: 5%; margin-top: 5%;*/ border-radius: 50%; display: inline-block;}.month-text{color: white; font-size: 5vw; display: grid; padding-left: 3%;}.all-container{display: grid; grid-template-rows: 42px auto;}@media screen and (min-width : 801px) and (max-width: 1200px){.dot{padding: 36%; border-radius: 50%;}}@media screen and (min-width : 1200px) and (max-width: 1400px){.dot{padding: 36%; border-radius: 50%; display: inline-block;}}@media screen and (min-width : 400px) and (max-width : 800px){.month-text{color: white; display: grid; padding-left: 3%; padding-bottom: 5%; margin-top: -5%;}.year{grid-template-columns: auto auto auto;}.dot{padding: 36%; border-radius: 50%; display: inline-block;}}@media screen and (max-width : 400px){.month-text{color: white; display: grid; padding-left: 3%; padding-bottom: 5%; margin-top: -5%;}.year{grid-template-columns: auto auto auto;}.dot{padding: 40%; border-radius: 50%; display: inline-block;}}.month-container{display: grid; grid-template-rows: 0.1fr 0.9fr; margin-bottom: 0px;}.month-dots{display: grid; grid-template-columns: auto auto auto auto auto auto auto; padding-left: 10px; padding-right: 10px;}.verybad{background-color: #EF2D5A;}.bad{background-color: #FFC132;}.normal{background-color: #06D6A0;}.good{background-color: #19C5FF;}.verygood{background-color: #1453E5;}.unknown{background-color: black; border-color: white;}</style> <script>var isInViewport=function(id){let elem=document.getElementById(id); var bounding=elem.getBoundingClientRect(); return ( bounding.top >=0 && bounding.left >=0 && bounding.bottom <=(window.innerHeight || document.documentElement.clientHeight) && bounding.right <=(window.innerWidth || document.documentElement.clientWidth) );}; var isAboveViewport=function(id){let elem=document.getElementById(id); var bounding=elem.getBoundingClientRect(); return ( bounding.top < 0 );}; function setNavBarYear(year){document.getElementById("navbar").innerHTML="< " + year + " >";}window.addEventListener('scroll', function(e){let elements={"year-text-2019": "2019", "year-text-2020": "2020", "year-text-2021": "2021",}// if none are in, then pick the maximum bounding.top thats above // get all elements that are above // pick the last one let elementsAbove=Object.keys(elements).filter(elemId=> isAboveViewport(elemId)); if (elementsAbove.length){let lastElementAbove=elementsAbove[elementsAbove.length - 1]; setNavBarYear(elements[lastElementAbove]); return;}// if any are in then pick the first one for (let id in elements){if (isInViewport(id)){setNavBarYear(elements[id]); return;}}}); const RATINGS_TO_EMOJI={"verygood": "ðŸ˜ƒ", "good": "ðŸ™‚", "normal": "ðŸ˜¶", "bad": "ðŸ˜ž", "verybad": "ðŸ˜¢",}; const WEEK_DAYS=['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']; let USER_ID=window.location.href.split("?")[1]; let currentYear; let currentMonth=""; let allNotes={}; //{'YYYY-MM-DD': <note text>}let allRatings={}; //{'YYYY-MM-DD': rating}const LIST_OF_MONTHS=["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"]; const LIST_OF_SHORT_MONTHS=["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]; let getAllNotesPromise=getAllNotes(); window.addEventListener('load', function(){getAllNotesPromise.then(()=>{console.log(allNotes, allRatings); populateYear("2019"); populateYear("2020"); populateYear("2021");});}); function populateYear(year){let yearTextDiv=document.createElement("div"); yearTextDiv.setAttribute("class", "year-text"); yearTextDiv.id="year-text-" + year; yearTextDiv.appendChild(document.createTextNode(year)); yearTextDiv.appendChild(document.createElement("hr")); document.getElementById("body-container").appendChild(yearTextDiv); let yearDiv=document.createElement("div"); yearDiv.id="year-" + year; yearDiv.setAttribute("class", "year"); document.getElementById("body-container").appendChild(yearDiv); for (let i=1; i <=12; i++){let monthDiv=document.createElement("div"); monthDiv.setAttribute("class", "month-container"); monthDiv.id="month-container-" + year + "-" + get2DigitFromInt(i); let monthTextDiv=document.createElement("div"); monthTextDiv.setAttribute("class", "month-text"); monthDiv.appendChild(monthTextDiv); let monthDotsDiv=document.createElement("div"); monthDotsDiv.setAttribute("class", "month-dots"); monthDiv.appendChild(monthDotsDiv); document.getElementById("year-" + year).appendChild(monthDiv); populateMonth("month-container-" + year + "-" + get2DigitFromInt(i), year + "-" + get2DigitFromInt(i));}}function getYYYYMMFromDate(date){return date.split("-")[0] + "-" + date.split("-")[1];}// month-container-2020-01, 2020-01 function populateMonth(id, YYYYMM){let YYYY=YYYYMM.split("-")[0]; let MM=YYYYMM.split("-")[1]; function monthRatingsToList(monthRatings){let firstDayInMonth=YYYY + "-" + MM + "-" + "01"; let weekDayOfFirstDayInMonth=getWeekDayN(firstDayInMonth); let numberOfEmptyDaysToInsertBefore=weekDayOfFirstDayInMonth; let monthRatingsList=[]; for (let i=0; i < numberOfEmptyDaysToInsertBefore; i++){monthRatingsList.push("none");}let daysInMonth=new Date(YYYY, MM, 0).getDate(); for (let i=1; i <=daysInMonth; i++){let d=YYYY + "-" + MM + "-" + get2DigitFromInt(i); if (!!monthRatings[d]){monthRatingsList.push(monthRatings[d]);}else{monthRatingsList.push("unknown");}}// now fill in all the unknowns return monthRatingsList;}let monthText=LIST_OF_SHORT_MONTHS[parseInt(YYYYMM.split("-")[1]) - 1]; document.getElementById(id).getElementsByClassName("month-text")[0].appendChild(document.createTextNode(monthText)); let monthRatings=getRatingsForYYYYMM(YYYYMM); let monthRatingsList=monthRatingsToList(monthRatings); for (let i in monthRatingsList){let span=document.createElement("span"); if (monthRatingsList[i] !="none"){span.setAttribute("class", monthRatingsList[i].toLowerCase() + " " + "dot");}let div=document.createElement("div"); div.appendChild(span); document.getElementById(id).getElementsByClassName("month-dots")[0].appendChild(div);}}function getAllNotes(){let url='https://b.solutionbanks.com:3838/getusernotes'; let body={id: USER_ID,}; return fetch(url,{method: 'post', headers:{"Content-type": "application/json; charset=UTF-8"}, body: JSON.stringify(body)}) .then(json=> json.json()) .then(function(data){console.log('Request succeeded with JSON response', data); allNotes=data.notes; allRatings=data.ratings;}) .catch(function(error){console.log('Request failed', error);});}// '2019-12' function getNotesForYYYYMM(YYYYMM){let notesForYYYYMM={}; let allNotesDates=Object.keys(allNotes).sort(); for (let date of allNotesDates){if (getYYYYMMFromDate(date)==YYYYMM){notesForYYYYMM[date]=allNotes[date];}}return notesForYYYYMM;}// '2019-12' function getRatingsForYYYYMM(YYYYMM){let ratingsForYYYYMM={}; let allRatingsDates=Object.keys(allRatings).sort(); for (let date of allRatingsDates){if (getYYYYMMFromDate(date)==YYYYMM){ratingsForYYYYMM[date]=allRatings[date];}}return ratingsForYYYYMM;}function getWeekDay(dateYYYMMDD){return WEEK_DAYS[getWeekDayN(dateYYYMMDD)];}// 0: sunday ... 6: Saturday function getWeekDayN(dateYYYMMDD){let tzdiff=(new Date()).getTimezoneOffset() let n=(new Date((new Date(dateYYYMMDD)).getTime() + tzdiff * 60 * 1000)).getDay(); return n;}function get2DigitFromInt(i){i="" + i; if (i.length==1){return "0" + i;}else{return i;}}</script></head><body> <div class="all-container"> <div class="navbar" id="navbar"> < 2019> </div><div class="under-navbar"> </div><div class="body-container" id="body-container"> </div></div></body></html>
